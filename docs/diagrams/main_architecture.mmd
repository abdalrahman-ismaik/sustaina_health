# Main Architecture Diagram
# Copy this code to mermaid.live for export

graph TB
    subgraph "ðŸ‘¤ User Layer"
        USER[ðŸ‘¤ User]
    end
    
    subgraph "ðŸ“± Sustaina Health Flutter App"
        subgraph "ðŸ  Core Features"
            HOME[ðŸ  Home Dashboard]
            MCP_CHAT[ðŸ’¬ MCP Command Chat]
        end
        
        subgraph "ðŸŽ¯ Health Features"
            AUTH[ðŸ” Authentication]
            EXERCISE[ðŸ’ª Exercise & Workouts]
            NUTRITION[ðŸŽ Nutrition Tracking]
            SLEEP[ðŸ˜´ Sleep Monitoring]
            PROFILE[ðŸ‘¤ User Profile]
        end
        
        subgraph "âš™ï¸ App Infrastructure"
            STATE[ðŸ”§ Riverpod State Management]
            ROUTER[ðŸ§­ GoRouter Navigation]
            STORAGE[ðŸ’¾ Hybrid Storage]
        end
    end
    
    subgraph "â˜ï¸ Backend Services"
        subgraph "ðŸ¤– AI Services"
            FASTAPI[âš¡ FastAPI Backend]
            MCP_SERVER[ðŸ§  MCP Server]
            AI_WORKOUT[ðŸ’ª Workout AI]
            AI_NUTRITION[ðŸŽ Nutrition AI]
        end
        
        subgraph "ðŸ“Š Data & Storage"
            FIREBASE_AUTH[ðŸ” Firebase Auth]
            FIRESTORE[ðŸ“„ Cloud Firestore]
            FIREBASE_STORAGE[ðŸ“ Firebase Storage]
        end
    end
    
    USER --> HOME
    HOME --> MCP_CHAT
    HOME --> EXERCISE
    HOME --> NUTRITION
    HOME --> SLEEP
    
    MCP_CHAT --> MCP_SERVER
    EXERCISE --> AI_WORKOUT
    NUTRITION --> AI_NUTRITION
    
    AUTH --> FIREBASE_AUTH
    STORAGE --> FIRESTORE
    PROFILE --> FIREBASE_STORAGE
    
    %% Styling
    classDef userClass fill:#FFE6CC,stroke:#D79B00,stroke-width:2px
    classDef appClass fill:#D5E8D4,stroke:#82B366,stroke-width:2px
    classDef coreClass fill:#E1D5E7,stroke:#9673A6,stroke-width:2px
    classDef healthClass fill:#FFF2CC,stroke:#D6B656,stroke-width:2px
    classDef infraClass fill:#F8CECC,stroke:#B85450,stroke-width:2px
    classDef backendClass fill:#DAE8FC,stroke:#6C8EBF,stroke-width:2px
    classDef aiClass fill:#E1D5E7,stroke:#9673A6,stroke-width:2px
    classDef dataClass fill:#FFF2CC,stroke:#D6B656,stroke-width:2px
    
    class USER userClass
    class HOME,MCP_CHAT coreClass
    class AUTH,EXERCISE,NUTRITION,SLEEP,PROFILE healthClass
    class STATE,ROUTER,STORAGE infraClass
    class FASTAPI,MCP_SERVER,AI_WORKOUT,AI_NUTRITION aiClass
    class FIREBASE_AUTH,FIRESTORE,FIREBASE_STORAGE dataClass
